{% extends 'base.html.twig' %}

{% block title %}Historique des demandes{% endblock %}

{% block body %}
    <h1 class="text-5xl font-bold-700 text-blue-900 mb-10">Historique de mes demandes</h1>
    <table class="min-w-full bg-white border border-gray-300">
      <!-- En-tête des colonnes -->
      <thead class="bg-[#F9FAFB]">    
       <!-- Ligne des noms des colonnes -->
        <tr class="text-left text-gray-700">
          <th class="px-4 py-4 text-sm font-medium">Type de demande</th>
          <th class="px-4 py-2 text-sm font-medium">Demandée le</th>
          <th class="px-4 py-2 text-sm font-medium">Date de début</th>
          <th class="px-4 py-2 text-sm font-medium">Date de fin</th>
          <th class="px-4 py-2 text-sm font-medium">Nb jours</th>
          <th class="px-4 py-2 text-sm font-medium">Statut</th>
          <th class="px-4 py-2"></th>
        </tr>
        <!-- Ligne des champs de recherche -->
        <tr class="text-gray-700">
            <th class="px-4 py-1 w-1/6">
            <select class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
              <option value=""></option>
              {% for type in requestTypes %}
              <option value="{{ type.id }}">{{ type.name }}</option>
              {% endfor %}
            </select>
            </th>
            <th class="px-4 py-1">
            <input 
              type="date" 
              placeholder="" 
              class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
            </th>
          <th class="px-4 py-1">
            <input 
              type="date" 
              placeholder="" 
              class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
          </th>
          <th class="px-4 py-1">
            <input 
              type="date" 
              placeholder="" 
              class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
          </th>
          <th class="px-4 py-1 w-1/6">
            <input 
              type="text" 
              placeholder=""
              class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
          </th>
          <th class="px-4 py-1 w-1/6">
            <select class="appearance-none text-sm font-medium mb-5 w-full h-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-200 px-2">
              <option value=""></option>
              <option value="0">En cours</option>
              <option value="1">Accepté</option>
              <option value="2">Refusé</option>
            </select>
          </th>
          <th class="px-4 py-1"></th>
        </tr>
      </thead>
      <!-- Corps du tableau -->
    <tbody>
      {% for request in requests %}
        <tr class="border-b">
          <td class="px-4 py-4 text-sm text-gray-700">{{ request.requestType.name }}</td>
            <td class="px-4 py-4 text-sm text-gray-700">{{ request.createdAt|date('d/m/Y H\\\hi') }}</td>
          <td class="px-4 py-4 text-sm text-gray-700">{{ request.startAt|date('d/m/Y H\\\hi') }}</td>
          <td class="px-4 py-4 text-sm text-gray-700">{{ request.endAt|date('d/m/Y H\\\hi') }}</td>       
          <td class="px-4 py-4 text-sm text-gray-700">{{ request.getWorkingDays() }} jours</td>
          <td class="px-4 py-4 text-sm text-gray-700">
            {% if request.answer == 1 %}
              Accepté
            {% elseif request.answer == 2 %}
              Refusé
            {% else %}
              En Cours
            {% endif %}
          </td>
          <td class="px-4 py-4">
            <button class="bg-gray-100 text-gray-700 font-medium py-2 px-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300">Détails</button>
          </td>
        </tr>
        {% endfor %}
    </tbody>
    </table>
    </table>
{% endblock %}